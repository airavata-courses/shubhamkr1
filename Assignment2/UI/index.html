<!DOCTYPE html>
<html>
<head>
	<title>Assignment 1</title>
</head>
<body>
<div id="navbar" >
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
          
          <script type="text/javascript">
          //calling apigateway
		function get() {
			var host = 'http://localhost';
			var port = 20000;
			var path = 'apigateway';
			var url = host + ':' + port + '/' + path;
			var xmlhttp = new XMLHttpRequest();
			var responseTextArea = document.getElementById('response');
			xmlhttp.onreadystatechange = function(){
				console.log(xmlhttp.readyState);
				if (xmlhttp.readyState == XMLHttpRequest.DONE) {
					console.log(xmlhttp.responseText);
					if (xmlhttp.status == 200)	responseTextArea.innerHTML = xmlhttp.responseText;	
					else if (xmlhttp.status == 400)	responseTextArea.innerHTML = 'Error 400';
					else	responseTextArea.innerHTML = 'Unexpected error' + xmlhttp.status;
				}
			}
			xmlhttp.open('POST', url, true);
			xmlhttp.send();
		}


		
	</script>

   
        </div>
        <div >
			<div >
				
					<!--<button onclick="javascript:get();" type="button">Call to API Server</button>-->
					
    		 <input type="text" placeholder="" name="abc" id="mssg">
    		 <button id="gateway" >Send </button> 
					
				 
			</div>
			<br>
			<div class="form-control" id="response"></div>
		  </div>

       <script>
	    $("#gateway").click(function(){
        var msg = $("#mssg").val();
        console.log("Message to be sent : "+msg);
        $.ajax({url: "http://localhost:20000/apigateway", data:{text: msg}, type:"GET", success: function(result){
        document.getElementById('response').innerHTML = result.msg;
        console.log(result)
        }});
        });
        </script>
</body>
</html>